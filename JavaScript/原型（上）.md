# åŸå‹

åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯å±äºå¯¹è±¡ï¼Œå¯ä»¥åƒå…¶ä»–å¯¹è±¡ä¸€æ ·è®¿é—®å±æ€§ï¼Œå…¶ä¸­å°±æœ‰ä¸€ä¸ªå±æ€§å«åŸå‹ prototypeï¼Œå€¼ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚é»˜è®¤ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ª constructor å±æ€§ï¼ŒæŒ‡å‘äº†å‡½æ•°æœ¬èº«ã€‚

```JavaScript
function Person () {
  return 'hi'
}
Person.prototype // {constructor: Æ’}
Person.prototype.constructor // Æ’ Person() {}
```
ç”¨å›¾æ¥è¡¨ç¤ºï¼š
![prototype and constructor](Image/prototype1.png)

æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œæ“ä½œï¼Œä½†è¿™ä¸ªå±æ€§ï¼Œåªæœ‰åœ¨å¯¹å‡½æ•°è¿›è¡Œæ„é€ è°ƒç”¨çš„æ—¶å€™æ‰ä¼šèµ·ä½œç”¨


**ğŸ™‚ ä¸ºåŸå‹æ·»åŠ å±æ€§å’Œæ–¹æ³•**

```JavaScript
function Person (name) {
  this.name = name
}
Person.prototype.smart = true
Person.prototype.run = function () {
  console.log('running')
}

// æˆ–è€…ä¸€æ¬¡æ€§æ·»åŠ 

Person.prototype = {
  smart: true,
  run() {
    console.log('running')
  }
}
```

**ğŸ˜³ ä½¿ç”¨**

```JavaScript
// ...
let a = new Person('a')
a.name // a
a.smart // true
a.run() // running
```

**ğŸ˜ hasOwnPrototype**

è¯¥æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦è‡ªèº«å±æ€§ï¼Œå¦‚ï¼š

```JavaScript
function Person () {
  this.name = 'Jon'
}
Person.prototype.name = 'people'
Person.prototype.age = 18
let jon = new Person()
jon.hasOwnProperty('name') // true
jon.hasOwnProperty('age') // false
```

age ä¸ºåŸå‹ä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥ä¸º false

**ğŸ˜Ÿ isPrototypeOf**

è¯¥æ–¹æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œå¦‚ï¼š

```JavaScript
let base = {
  name: 'people',
  age: 18
}
function Person () {
  this.name = 'Jon'
}
Person.prototype = base
let jon = new Person()
base.isPrototypeOf(jon) // true
```

**ğŸ˜¯ getPrototypeOf**

å½“ä¸çŸ¥é“å¯¹è±¡çš„åŸå‹å…·ä½“æ˜¯å“ªä¸ªçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ¥åˆ¤æ–­ï¼Œå¦‚ï¼š

```JavaScript
let base = {
  name: 'people',
  age: 18
}
function Person () {
  this.name = 'Jon'
}
Person.prototype = base
let jon = new Person()
Object.getPrototypeOf(jon) // { name: 'people', age: 18 }
```

**ğŸ™ƒ \_ \_proto\_ \_**

æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè¯¥å±æ€§ï¼Œä¾¿æºè®¿é—®åŸå‹å¯¹è±¡ï¼Œç›´æŒ‡åŸå‹å¯¹è±¡ï¼š

```JavaScript
let base = {
  name: 'people',
  age: 18
}
function Person () {
  this.name = 'Jon'
}
Person.prototype = base
let jon = new Person()
jon.__proto__ // { name: 'people', age: 18 }
```

ç”¨å›¾æ¥è¡¨ç¤ºï¼š
![prototype and constructor](Image/prototype2.png)

ä¸ prototype ä¸åŒçš„æ˜¯ï¼Œ**\_ \_proto\_ \_** æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œprototype æ˜¯æ„é€ å‡½æ•°çš„å±æ€§


**åŸå‹é“¾**

å½“è®¿é—®å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æ—¶ï¼Œjs å¼•æ“ä¼šéå†è‡ªèº«å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œä¾¿ä¼šå»**åŸå‹**ä¸ŠæŸ¥æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œä¾¿ä¼šç»§ç»­å¾€ä¸Šæ‰¾ï¼Œç”±äº**åŸå‹æ˜¯ä¸€ä¸ªå¯¹è±¡**ï¼Œæ˜¯å¯¹è±¡ä¾¿ä¼šæœ‰ä¸€ä¸ªåŸå‹ï¼Œæœ‰åŸå‹è¯´æ˜å­˜åœ¨æ„é€ å‡½æ•°ï¼Œå¦‚ Person ä¾‹å­ï¼ŒæŸ¥çœ‹åŸå‹çš„æ„é€ å‡½æ•°æ˜¯å•¥ï¼š

```JavaScript
// ...
Person.prototype.__proto__.constructor // åŸå‹çš„åŸå‹çš„æ„é€ å‡½æ•°, Æ’ Object() { [native code] }
```

ç”¨å›¾è¡¨ç¤ºå°±æ˜¯




```JavaScript
// ...
let a = new Person('a')
a.toString() // "[object Object]"
```

Person å‡½æ•°å’ŒåŸå‹ä¸Šéƒ½æ²¡æœ‰ toString æ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½è°ƒç”¨ Object ä¸Šçš„ toString æ–¹æ³•ã€‚

æ³¨æ„ï¼šåŸºäºåŒä¸€ä¸ªæ„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡ï¼Œå…±äº«å‡½æ•°çš„åŸå‹ï¼Œå¦‚ï¼š

```JavaScript
// ...
let b = new Person('b')
b.name // b
b.smart = false
b.smart // false
a.smart // false
```

å¯¹ b çš„ smart å±æ€§è¿›è¡Œä¿®æ”¹ï¼Œa è®¿é—® smart ä¹Ÿæœ‰åŸå…ˆçš„ true å˜ä¸º false äº†ã€‚

å¦‚æœè‡ªèº«å’ŒåŸå‹ä¸Šå­˜åœ¨åŒåå±æ€§ï¼Œä¼šä¼˜å…ˆä½¿ç”¨è‡ªèº«å±æ€§ï¼Œä¾‹å¦‚ï¼š

```JavaScript
function Person () {
  this.name = 'Jon'
}
Person.prototype.name = 'people'
let jon = new Person()
jon.name // Jon
```

## â„ï¸ æ€»ç»“è‡ªï¼š

- ã€ŠJavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹æŒ‡å—ï¼ˆç¬¬ 2 ç‰ˆï¼‰ã€‹ç¬¬ 5 ç«  åŸå‹
- ã€ŠNode.js å¼€å‘æŒ‡å—ã€‹é™„å½• A
